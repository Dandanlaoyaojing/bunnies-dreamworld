<!--pages/account/account.wxml-->
<view class="account-container">
  <!-- é¡¶éƒ¨å¯¼èˆª -->
  <view class="nav-bar">
    <view class="nav-content">
      <view class="nav-left" bindtap="goBack">
        <text class="nav-icon">â†</text>
      </view>
      <text class="nav-title">è´¦æˆ·ç®¡ç†</text>
      <view class="nav-right"></view>
    </view>
  </view>

  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="profile-section">
    <view class="profile-card">
      <view class="profile-header">
        <view class="avatar-container">
          <image class="avatar" src="{{userInfo.avatar || '/images/tabbar/my.png'}}" mode="aspectFill" />
          <view class="avatar-edit" bindtap="changeAvatar">
            <text class="edit-icon">ğŸ“·</text>
          </view>
        </view>
        <view class="profile-info">
          <text class="username">{{userInfo.username || 'æœªç™»å½•'}}</text>
          <text class="user-id">ID: {{userInfo.id || '000000'}}</text>
          <view class="user-status">
            <view class="status-dot {{userInfo.isOnline ? 'online' : 'offline'}}"></view>
            <text class="status-text">{{userInfo.isOnline ? 'åœ¨çº¿' : 'ç¦»çº¿'}}</text>
          </view>
        </view>
      </view>
      
      <view class="profile-stats">
        <view class="stat-item">
          <text class="stat-number">{{userInfo.noteCount || 0}}</text>
          <text class="stat-label">ç¬”è®°</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{userInfo.followers || 0}}</text>
          <text class="stat-label">å…³æ³¨è€…</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{userInfo.following || 0}}</text>
          <text class="stat-label">å…³æ³¨ä¸­</text>
        </view>
      </view>
    </view>
  </view>

  <!-- åŠŸèƒ½åˆ†ç±» -->
  <view class="function-sections">
    <!-- è´¦æˆ·è®¾ç½® -->
    <view class="section">
      <view class="section-title">âš™ï¸ è´¦æˆ·è®¾ç½®</view>
      <view class="function-grid">
        <view class="function-item" bindtap="editProfile">
          <view class="function-icon profile-icon">ğŸ‘¤</view>
          <text class="function-name">ç¼–è¾‘èµ„æ–™</text>
        </view>
        <view class="function-item" bindtap="changePassword">
          <view class="function-icon password-icon">ğŸ”’</view>
          <text class="function-name">ä¿®æ”¹å¯†ç </text>
        </view>
        <view class="function-item" bindtap="privacySettings">
          <view class="function-icon privacy-icon">ğŸ›¡ï¸</view>
          <text class="function-name">éšç§è®¾ç½®</text>
        </view>
        <view class="function-item" bindtap="notificationSettings">
          <view class="function-icon notification-icon">ğŸ””</view>
          <text class="function-name">é€šçŸ¥è®¾ç½®</text>
        </view>
      </view>
    </view>

    <!-- æ•°æ®ç®¡ç† -->
    <view class="section">
      <view class="section-title">ğŸ’¾ æ•°æ®ç®¡ç†</view>
      
      <!-- åŒæ­¥çŠ¶æ€å¡ç‰‡ -->
      <view class="sync-status-card" wx:if="{{syncStatus.totalCount > 0}}">
        <view class="sync-header">
          <text class="sync-title">ğŸ“Š åŒæ­¥çŠ¶æ€</text>
          <text class="sync-progress">{{syncStatus.syncProgress}}%</text>
        </view>
        <view class="sync-stats">
          <view class="sync-stat-item">
            <text class="sync-stat-number">{{syncStatus.syncedCount}}</text>
            <text class="sync-stat-label">å·²åŒæ­¥</text>
          </view>
          <view class="sync-stat-item">
            <text class="sync-stat-number">{{syncStatus.unsyncedCount}}</text>
            <text class="sync-stat-label">æœªåŒæ­¥</text>
          </view>
          <view class="sync-stat-item">
            <text class="sync-stat-number">{{syncStatus.totalCount}}</text>
            <text class="sync-stat-label">æ€»è®¡</text>
          </view>
        </view>
        <view class="sync-progress-bar">
          <view class="sync-progress-fill" style="width: {{syncStatus.syncProgress}}%"></view>
        </view>
      </view>
      
      <view class="function-grid">
        <view class="function-item" bindtap="syncToServer">
          <view class="function-icon sync-up-icon">â˜ï¸â†‘</view>
          <text class="function-name">åŒæ­¥åˆ°æœåŠ¡å™¨</text>
          <text class="function-badge" wx:if="{{syncStatus.unsyncedCount > 0}}">{{syncStatus.unsyncedCount}}</text>
        </view>
        <view class="function-item" bindtap="syncFromServer">
          <view class="function-icon sync-down-icon">â˜ï¸â†“</view>
          <text class="function-name">ä»æœåŠ¡å™¨ä¸‹è½½</text>
        </view>
        <view class="function-item" bindtap="createBackup">
          <view class="function-icon backup-icon">ğŸ’¾</view>
          <text class="function-name">åˆ›å»ºå¤‡ä»½</text>
        </view>
        <view class="function-item" bindtap="cleanOldData">
          <view class="function-icon clean-icon">ğŸ§¹</view>
          <text class="function-name">æ¸…ç†æ—§æ•°æ®</text>
        </view>
        <view class="function-item" bindtap="viewDataStats">
          <view class="function-icon stats-icon">ğŸ“Š</view>
          <text class="function-name">æ•°æ®ç»Ÿè®¡</text>
        </view>
        <view class="function-item" bindtap="clearCache">
          <view class="function-icon cache-icon">ğŸ—‘ï¸</view>
          <text class="function-name">æ¸…ç†ç¼“å­˜</text>
        </view>
      </view>
    </view>

    <!-- å­˜å‚¨ä¿¡æ¯ -->
    <view class="section">
      <view class="section-title">ğŸ“± å­˜å‚¨ä¿¡æ¯</view>
      <view class="storage-card">
        <view class="storage-item">
          <view class="storage-icon">ğŸ“±</view>
          <view class="storage-content">
            <text class="storage-title">æœ¬åœ°å­˜å‚¨</text>
            <text class="storage-desc">å·²ä½¿ç”¨ {{storageInfo.localUsed || '0'}}MB / {{storageInfo.localTotal || '100'}}MB</text>
          </view>
          <view class="storage-progress">
            <view class="progress-bar">
              <view class="progress-fill" style="width: {{storageInfo.localPercent || 0}}%"></view>
            </view>
            <text class="progress-text">{{storageInfo.localPercent || 0}}%</text>
          </view>
        </view>
        
        <view class="storage-details">
          <view class="detail-item">
            <text class="detail-label">ç¬”è®°æ•°æ®</text>
            <text class="detail-value">{{storageInfo.notesCount || '0'}} æ¡</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">è´¦æˆ·æ•°æ®</text>
            <text class="detail-value">{{storageInfo.accountsCount || '0'}} ä¸ª</text>
          </view>
          <view class="detail-item">
            <text class="detail-label">æ ‡ç­¾æ•°æ®</text>
            <text class="detail-value">{{storageInfo.tagsCount || '0'}} ä¸ª</text>
          </view>
        </view>
      </view>
    </view>

    <!-- é«˜çº§åŠŸèƒ½ -->
    <view class="section">
      <view class="section-title">ğŸ”§ é«˜çº§åŠŸèƒ½</view>
      <view class="function-grid">
        <view class="function-item" bindtap="saveToDanAccount">
          <view class="function-icon dan-icon">ğŸ’¾</view>
          <text class="function-name">ä¿å­˜åˆ°Danè´¦æˆ·</text>
        </view>
        <view class="function-item" bindtap="viewDanAccount">
          <view class="function-icon view-icon">ğŸ‘¤</view>
          <text class="function-name">æŸ¥çœ‹Danè´¦æˆ·</text>
        </view>
        <view class="function-item" bindtap="openDataRecovery">
          <view class="function-icon recovery-icon">ğŸ”„</view>
          <text class="function-name">æ•°æ®æ¢å¤</text>
        </view>
        <view class="function-item" bindtap="openNetworkDiagnosis">
          <view class="function-icon network-icon">ğŸŒ</view>
          <text class="function-name">ç½‘ç»œè¯Šæ–­</text>
        </view>
      </view>
    </view>

    <!-- å¸®åŠ©ä¸åé¦ˆ -->
    <view class="section">
      <view class="section-title">â“ å¸®åŠ©ä¸åé¦ˆ</view>
      <view class="function-grid">
        <view class="function-item" bindtap="contactUs">
          <view class="function-icon contact-icon">ğŸ’¬</view>
          <text class="function-name">æ„è§åé¦ˆ</text>
        </view>
        <view class="function-item" bindtap="checkUpdate">
          <view class="function-icon update-icon">ğŸ”„</view>
          <text class="function-name">æ£€æŸ¥æ›´æ–°</text>
        </view>
        <view class="function-item" bindtap="aboutApp">
          <view class="function-icon about-icon">â„¹ï¸</view>
          <text class="function-name">å…³äºåº”ç”¨</text>
        </view>
        <view class="function-item" bindtap="logout">
          <view class="function-icon logout-icon">ğŸšª</view>
          <text class="function-name">é€€å‡ºç™»å½•</text>
        </view>
      </view>
    </view>
  </view>

  <!-- å¼€å‘è€…å·¥å…·ï¼ˆæµ‹è¯•ç”¨ï¼‰ -->
  <view class="dev-section">
    <button class="dev-btn" bindtap="quickLogin">å¿«é€Ÿç™»å½•ï¼ˆå¼€å‘æµ‹è¯•ï¼‰</button>
  </view>
</view>

















