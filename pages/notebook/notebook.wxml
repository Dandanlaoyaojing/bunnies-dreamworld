<!--pages/notebook/notebook.wxml-->
<view class="notebook-container">
  <!-- å¯¼èˆªæ  -->
  <view class="nav-bar">
    <view class="nav-left" bindtap="goBack">
      <text class="nav-icon">â€¹</text>
    </view>
    <view class="nav-center">
      <text class="nav-title">{{categoryTitle}} æ–‡ä»¶ç°¿</text>
    </view>
    <view class="nav-right">
      <text class="nav-action" bindtap="goToEditor">ç¼–è¾‘</text>
    </view>
  </view>
  
  <!-- æœç´¢æ  -->
  <view class="search-section">
    <view class="search-box">
      <input class="search-input" 
             placeholder="æœç´¢ç¬”è®°..." 
             value="{{searchKeyword}}" 
             bindinput="onSearchInput" />
      <text class="search-icon">ğŸ”</text>
    </view>
  </view>
  
  <!-- ç¬”è®°åˆ—è¡¨ -->
  <view class="notes-container">
    <view class="note-item" wx:for="{{filteredNotes}}" wx:key="id" bindtap="openNote" data-note="{{item}}">
      <!-- ç¬”è®°ä¿¡æ¯å¡ç‰‡ -->
      <view class="note-info-card">
        <view class="note-header">
          <text class="note-title">{{item.title}}</text>
          <text class="note-time">{{item.createTime}}</text>
        </view>
        
        <view class="note-content">
          <text class="note-text">{{item.content}}</text>
        </view>
        
        <view class="note-footer">
          <view class="note-tags">
            <text class="tag" wx:for="{{item.tags}}" wx:key="*this">#{{item}}</text>
          </view>
          <view class="note-stats">
            <text class="word-count">{{item.wordCount}}å­—</text>
          </view>
        </view>
      </view>
      
      <!-- æ“ä½œæŒ‰é’® -->
      <view class="note-actions">
        <text class="action-btn edit-btn" bindtap="editNote" data-note="{{item}}" catchtap="true">ç¼–è¾‘</text>
        <text class="action-btn delete-btn" bindtap="deleteNote" data-id="{{item.id}}" catchtap="true">åˆ é™¤</text>
      </view>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{filteredNotes.length === 0}}">
      <view class="empty-card">
        <text class="empty-icon">ğŸ“</text>
        <text class="empty-text">{{searchKeyword ? 'æ²¡æœ‰æ‰¾åˆ°ç›¸å…³ç¬”è®°' : 'è¿˜æ²¡æœ‰ç¬”è®°ï¼Œå»åˆ›å»ºç¬¬ä¸€æ¡å§ï¼'}}</text>
        <button class="create-btn" bindtap="goToEditor">åˆ›å»ºç¬”è®°</button>
      </view>
    </view>
  </view>
  
  <!-- æµ®åŠ¨åˆ›å»ºæŒ‰é’® -->
  <view class="floating-btn" bindtap="goToEditor">
    <text class="floating-icon">+</text>
  </view>
</view>
